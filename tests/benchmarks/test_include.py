TAGS = [
    "autoescape",
    "block",
    "comment",
    "csrf_token",
    "cycle",
    "debug",
    "extends",
    "filter",
    "firstof",
    "for",
    "if",
    "ifchanged",
    "include",
    "load",
    "lorem",
    "now",
    "querystring",
    "regroup",
    "resetcycle",
    "spaceless",
    "templatetag",
    "url",
    "verbatim",
    "widthratio",
    "with",
]


FILTERS = [
    "add",
    "addslashes",
    "capfirst",
    "center",
    "cut",
    "date",
    "default",
    "default_if_none",
    "dictsort",
    "dictsortreversed",
    "divisibleby",
    "escape",
    "escapejs",
    "escapeseq",
    "filesizeformat",
    "first",
    "floatformat",
    "force_escape",
    "get_digit",
    "iriencode",
    "join",
    "json_script",
    "last",
    "length",
    "linebreaks",
    "linebreaksbr",
    "linenumbers",
    "ljust",
    "lower",
    "make_list",
    "phone2numeric",
    "pluralize",
    "pprint",
    "random",
    "rjust",
    "safe",
    "safeseq",
    "slice",
    "slugify",
    "stringformat",
    "striptags",
    "time",
    "timesince",
    "timeuntil",
    "title",
    "truncatechars",
    "truncatechars_html",
    "truncatewords",
    "truncatewords_html",
    "unordered_list",
    "upper",
    "urlencode",
    "urlize",
    "urlizetrunc",
    "wordcount",
    "wordwrap",
    "yesno",
]


def test_include_loop(benchmark, template_engine_nocache):
    template = "{% for template in templates %}{% include template %}{% endfor %}"
    template = template_engine_nocache.from_string(template)

    templates = [
        "benchmarks/include_1.txt",
        "benchmarks/include_2.txt",
    ] * 50
    url = "https://docs.djangoproject.com/en/5.2/ref/templates/builtins/#"
    context = {
        "templates": templates,
        "tags": TAGS,
        "filters": FILTERS,
        "url": url,
        "users": [
            {"name": "Alice", "age": 35},
            {"name": "Bob", "age": 21},
            {"name": "Carla", "age": 15},
            {"name": "David"},
            {"name": "Emma", "age": None},
        ],
    }

    benchmark(template.render, context)
